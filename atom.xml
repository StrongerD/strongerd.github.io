<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>ä¸ç æ ‘çš„å¼ºå“¥</title>
  
  <subtitle>è®°å½•æ¢ç´¢çš„ç‚¹æ»´ğŸ˜¼</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2019-09-02T01:28:07.408Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>Stronger Duan</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>MVVMå®ç°åŸç†</title>
    <link href="http://yoursite.com/2019/09/02/MVVM%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86/"/>
    <id>http://yoursite.com/2019/09/02/MVVMå®ç°åŸç†/</id>
    <published>2019-09-02T01:26:14.000Z</published>
    <updated>2019-09-02T01:28:07.408Z</updated>
    
    <content type="html"><![CDATA[<h2 id="MVVMåŸç†å®ç°"><a href="#MVVMåŸç†å®ç°" class="headerlink" title="MVVMåŸç†å®ç°"></a>MVVMåŸç†å®ç°</h2><p>åœ¨å®ç°MVVMä¹‹å‰æˆ‘ä»¬å…ˆæ¥äº†è§£ä¸€ä¸‹MVVMå’ŒMVCæ¨¡å¼çš„å·®å¼‚</p><h3 id="ä¸€ã€MVVM-vs-MVC"><a href="#ä¸€ã€MVVM-vs-MVC" class="headerlink" title="ä¸€ã€MVVM vs MVC"></a>ä¸€ã€MVVM vs MVC</h3><h4 id="MVCæ¨¡å¼"><a href="#MVCæ¨¡å¼" class="headerlink" title="MVCæ¨¡å¼"></a>MVCæ¨¡å¼</h4><blockquote><p>View(è§†å›¾)ï¼š ç”¨æˆ·ç•Œé¢ <br><br>Controller(æ§åˆ¶å™¨): ä¸šåŠ¡é€»è¾‘ <br><br>Model(æ¨¡å‹): æ•°æ®ä¿å­˜</p></blockquote><p><img src="https://lc-gold-cdn.xitu.io/9da7ababda36b88a5dd7.png?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt></p><a id="more"></a><p>MVCå…è®¸åœ¨ä¸æ”¹å˜è§†å›¾çš„æƒ…å†µä¸‹æ”¹å˜è§†å›¾å¯¹ç”¨æˆ·è¾“å…¥çš„ç›¸åº”æ–¹å¼ï¼Œç”¨æˆ·å¯¹Viewçš„æ“ä½œäº¤ç»™äº†Contollerå¤„ç†ï¼Œåœ¨Controllerä¸­å“åº”Viewçš„äº‹ä»¶è°ƒç”¨Modelçš„æ¥å£å¯¹æ•°æ®è¿›è¡Œæ“ä½œï¼Œä¸€æ—¦Modelå‘ç”Ÿå˜åŒ–ä¾¿é€šçŸ¥ç›¸å…³è§†å›¾è¿›è¡Œæ›´æ–°ã€‚</p><p>Mvcæ¨¡å¼çš„ä¸šåŠ¡é€»è¾‘ä¸»è¦é›†ä¸­åœ¨Controller</p><p>åœ¨æ²¡æœ‰ç°åœ¨é‚£ä¹ˆå¤šå‰ç«¯æ¡†æ¶çš„æƒ…å†µä¸‹ï¼ŒMvcæ¨¡å¼å¯ä»¥è¿™æ ·ç†è§£ã€‚å°†HTMLçœ‹ä½œæ˜¯Viewï¼Œjsæ˜¯controllerï¼Œè´Ÿè´£å¤„ç†ç”¨æˆ·ä¸åº”ç”¨çš„äº¤äº’ï¼Œå“åº”å¯¹viewçš„æ“ä½œï¼Œè°ƒç”¨Modelå¯¹æ•°æ®è¿›è¡Œæ“ä½œï¼Œå®Œæˆmodelä¸viewçš„åŒæ­¥ï¼ˆæ ¹æ®modelçš„æ”¹å˜ï¼Œé€šè¿‡é€‰æ‹©å™¨å¯¹viewè¿›è¡Œæ“ä½œï¼‰ï¼Œå°†jsçš„ajaxå½“ä½œmodelï¼Œä¹Ÿå³æ˜¯æ•°æ®å±‚ï¼Œé€šè¿‡ajaxä»æœåŠ¡å™¨è·å–æ•°æ®ã€‚</p><h4 id="MVVMæ¨¡å¼"><a href="#MVVMæ¨¡å¼" class="headerlink" title="MVVMæ¨¡å¼"></a>MVVMæ¨¡å¼</h4><blockquote><p>Model(æ¨¡å‹): æ•°æ®ä¿å­˜ <br><br>View(è§†å›¾): ç”¨æˆ·ç•Œé¢ <br><br>ViewModel: viewå’Œmodelçš„è¿æ¥å™¨, é€šè¿‡ä»–å®ç°åŒå‘ç»‘å®š <br></p></blockquote><p><img src="https://box.kancloud.cn/cf1408179b22cd06cb153688d97d4ae0_375x270.png" alt></p><p>MVVMä¸MVCæœ€å¤§çš„åŒºåˆ«å°±æ˜¯ï¼š å®ƒå®ç°äº†Viewå’ŒModelçš„è‡ªåŠ¨åŒæ­¥ï¼Œä¹Ÿå°±æ˜¯å½“Modelçš„å±æ€§å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæˆ‘ä»¬ä¸éœ€è¦åƒä»¥å‰ä¸€æ ·æ‰‹åŠ¨æ“ä½œD   omå»æ”¹å˜Viewï¼ŒModelçš„å±æ€§åœ¨æ”¹å˜åä»–ä¼šè‡ªåŠ¨è¿›è¡Œè§†å›¾çš„æ›´æ–°ã€‚è¿™å°±æ˜¯ç¥å¥‡çš„åŒå‘ç»‘å®š</p><h3 id="äºŒã€åŒå‘ç»‘å®šå®ç°åŸç†"><a href="#äºŒã€åŒå‘ç»‘å®šå®ç°åŸç†" class="headerlink" title="äºŒã€åŒå‘ç»‘å®šå®ç°åŸç†"></a>äºŒã€åŒå‘ç»‘å®šå®ç°åŸç†</h3><p>ç›®å‰å®ç°åŒå‘ç»‘å®šä¸»æµçš„å‡ ç§æ–¹æ³•ä¸»è¦æœ‰</p><p><strong>1.å‘å¸ƒè®¢é˜…è€…</strong>ï¼šé€šè¿‡pubï¼Œsubçš„æ–¹å¼å®ç°æ•°æ®å’Œè§†å›¾ç»‘å®šç›‘å¬ã€‚</p><p><strong>2.è„å€¼æ£€æµ‹</strong>ï¼š é€šè¿‡æ•°æ®æ¯”å¯¹çš„æ–¹å¼è¿›è¡Œæ£€æµ‹æ•°æ®æ˜¯å¦æœ‰æ›´æ–°ï¼Œæœ€ç®€å•çš„æ–¹å¼è‚¯å®šä¼šæ˜¯é€šè¿‡è½®è¯¢çš„æ–¹å¼ã€‚angularé‡‡ç”¨çš„æ–¹å¼æ˜¯åªæœ‰åœ¨æŒ‡å®šçš„äº‹ä»¶è§¦å‘ä¹‹åæ‰ä¼šè¿›è¡Œè„å€¼æ£€æµ‹ï¼Œæ¯”å¦‚ï¼šç”¨æˆ·è¾“å…¥æ–‡æœ¬ httpäº‹ä»¶ç­‰ã€‚</p><p><strong>3.æ•°æ®åŠ«æŒ</strong>ï¼švueä¸»è¦é‡‡ç”¨çš„æ˜¯æ•°æ®åŠ«æŒç»“åˆå‘å¸ƒ-è®¢é˜…è€…æ¨¡å¼ï¼Œé€šè¿‡es5çš„Object.defineProperty()æ¥åŠ«æŒå„ä¸ªå±æ€§çš„setterå’Œgetterï¼Œåœ¨æ•°æ®å˜åŠ¨æ—¶å‘å¸ƒæ¶ˆæ¯ç»™è®¢é˜…è€…ï¼Œå‡ºå‘ç›¸åº”çš„ç›‘å¬å›è°ƒã€‚</p><p>è¦å®ç°MVVMçš„åŒå‘ç»‘å®šéœ€è¦å®ç°ä»¥ä¸‹å‡ ç‚¹ï¼š</p><blockquote><p>1.å®ç°ä¸€ä¸ªæ•°æ®ç›‘å¬å™¨ Observeï¼Œèƒ½å¤Ÿå¯¹æ•°æ®å¯¹è±¡çš„æ‰€æœ‰å±æ€§è¿›è¡Œç›‘å¬ï¼Œå¦‚æœ‰å˜åŠ¨å¯æ‹¿åˆ°æœ€æ–°å€¼å¹¶é€šçŸ¥è®¢é˜…è€…</p></blockquote><blockquote><p>2.å®ç°ä¸€ä¸ªæŒ‡ä»¤è§£æå™¨Compileï¼Œå¯¹æ¯ä¸ªå…ƒç´ èŠ‚ç‚¹çš„æŒ‡ä»¤è¿›è¡Œæ‰«æå’Œè§£æï¼Œæ ¹æ®æŒ‡ä»¤æ¨¡æ¿æ›¿æ¢æ•°æ®ï¼Œä»¥åŠç»‘å®šç›¸åº”çš„æ›´æ–°å‡½æ•°</p></blockquote><blockquote><p>3.å®ç°ä¸€ä¸ªWatcherï¼Œä½œä¸ºè¿æ¥Observeå’ŒCompileçš„æ¡¥æ¢ï¼Œèƒ½å¤Ÿè®¢é˜…å¹¶æ”¶åˆ°æ¯ä¸ªå±æ€§å˜åŠ¨çš„é€šçŸ¥ï¼Œæ‰§è¡ŒæŒ‡ä»¤ç»‘å®šçš„ç›¸åº”å›è°ƒå‡½æ•°ï¼Œä»è€Œæ›´æ–°è§†å›¾</p></blockquote><p><img src="https://github.com/DMQ/mvvm/raw/master/img/2.png" alt></p><h4 id="1-å®ç°Observe"><a href="#1-å®ç°Observe" class="headerlink" title="1.å®ç°Observe"></a>1.å®ç°Observe</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">var data = &#123;name: kidding&#125;;</span><br><span class="line">observe(data);</span><br><span class="line">data.name = &apos;yes&apos;;</span><br><span class="line"></span><br><span class="line">funtion observe(data) &#123;</span><br><span class="line">    if (!data || type data !== &apos;Object&apos;) &#123;</span><br><span class="line">        return;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    Object.keys(data).forEach(function()&#123;</span><br><span class="line">        defineReactive(data, key, data[key]);</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function defineReactive(data, key, val) &#123;</span><br><span class="line">    var dep = new Dep();</span><br><span class="line">    observe(val);</span><br><span class="line">    object.defineProperty(data, key, &#123;</span><br><span class="line">        enumerable: true,</span><br><span class="line">        configurable: false,</span><br><span class="line">        get: function() &#123;</span><br><span class="line">            Dep.target &amp;&amp; dep.addDep(Dep.target);</span><br><span class="line">            return val;</span><br><span class="line">        &#125;,</span><br><span class="line">        set: function(newVal) &#123;</span><br><span class="line">            if (val === newVal) &#123;</span><br><span class="line">                return;</span><br><span class="line">            &#125;</span><br><span class="line">            console.log(val, &apos;---&gt;&apos;, newVal);</span><br><span class="line">            val = newVal;</span><br><span class="line">            dep.notify();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function Dep() &#123;</span><br><span class="line">    this.subs = [];</span><br><span class="line">&#125;</span><br><span class="line">Dep.prototype = &#123;</span><br><span class="line">    addSub: function(sub) &#123;</span><br><span class="line">        this.subs.push(sub)</span><br><span class="line">    &#125;,</span><br><span class="line">    notify: function() &#123;</span><br><span class="line">        this.subs.forEach(function(i)&#123;</span><br><span class="line">            i.update();</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Watcher.prototype = &#123;</span><br><span class="line">    get: function(key) &#123;</span><br><span class="line">        Dep.target = this;</span><br><span class="line">        this.value = data[key];</span><br><span class="line">        Dep.target = null;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-å®ç°Compile"><a href="#2-å®ç°Compile" class="headerlink" title="2.å®ç°Compile"></a>2.å®ç°Compile</h4><p>compileä¸»è¦åšçš„äº‹æƒ…å°±æ˜¯è§£ææ¨¡æ¿æŒ‡ä»¤ï¼Œå°†æ¨¡æ¿ä¸­çš„å˜é‡æ›¿æ¢ä¸ºçœŸå®çš„æ•°æ®ï¼Œç„¶ååˆå§‹åŒ–æ¸²æŸ“é¡µé¢è§†å›¾ï¼Œå¹¶å°†æ¯ä¸ªæŒ‡ä»¤å¯¹åº”çš„èŠ‚ç‚¹ç»‘å®šæ›´æ–°å‡½æ•°ï¼Œæ·»åŠ ç›‘å¬æ•°æ®çš„è®¢é˜…è€…ï¼Œä¸€æ—¦æ•°æ®æœ‰å˜åŠ¨ï¼Œæ”¶åˆ°é€šçŸ¥æ›´æ–°è§†å›¾ã€‚</p><p><img src="https://github.com/DMQ/mvvm/raw/master/img/3.png" alt></p><p>å› ä¸ºè§£æéå†çš„è¿‡ç¨‹æœ‰å¤šæ¬¡æ“ä½œDomï¼Œéœ€è¦å°†å®ä¾‹æ ¹èŠ‚ç‚¹çš„elè½¬æ¢æˆæ–‡æ¡£ç¢ç‰‡fragmentè¿›è¡Œè§£æç¼–è¯‘æ“ä½œã€‚è§£æå®Œæˆä¹‹ååœ¨å°†fragmentæ·»åŠ å›çœŸæ˜¯çš„domèŠ‚ç‚¹ä¸­</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">function Compile(el) &#123;</span><br><span class="line">    this.$el = this.isElementNode(el) ? el : document.querySelector(el);</span><br><span class="line">    if (this.$el) &#123;</span><br><span class="line">        this.$fragment = this.node2Fragment(this.$el);</span><br><span class="line">        this.init();</span><br><span class="line">        this.$el.appendChild(this.$fragment);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Compile.prototype = &#123;</span><br><span class="line">    init: function() &#123;</span><br><span class="line">        this.compileElement(this.$fragment);</span><br><span class="line">    &#125;,</span><br><span class="line">    node2Fragment: function(el) &#123;</span><br><span class="line">        var fragment = document.createDocumentFragment(), child;</span><br><span class="line">        while(child = el.firstChild) &#123;</span><br><span class="line">            fragment.appendChild();</span><br><span class="line">        &#125;</span><br><span class="line">        return fragment;</span><br><span class="line">    &#125;,</span><br><span class="line">    compileElement: function(el) &#123;</span><br><span class="line">        var childNodes = el.childNodes, me = this;</span><br><span class="line">        [].splice.call(childNodes).forEach(function(node)&#123;</span><br><span class="line">            var text = node.textContent;</span><br><span class="line">            var reg = /\&#123;\&#123;(.*)\&#125;\&#125;/;</span><br><span class="line">            if (me.isElementNode(node)) &#123;</span><br><span class="line">                me.compile(node);</span><br><span class="line">            &#125; else if (me.isTextNode(node) &amp;&amp; reg.test(text)) &#123;</span><br><span class="line">                me.compileText(node, RegExp.$1);</span><br><span class="line">            &#125;</span><br><span class="line">            if (node.childNodes &amp;&amp; node.childNodes.length) &#123;</span><br><span class="line">                me.compileElement(node);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    compile: function(node) &#123;</span><br><span class="line">        var nodeAttrs = node.attributes, me = this;</span><br><span class="line">        [].splice.call(nodeAttrs).forEach(function(attr)&#123;</span><br><span class="line">            var attrName = attr.name;</span><br><span class="line">            if (me.isDirective(attrName)) &#123;</span><br><span class="line">                var exp = attr.value;</span><br><span class="line">                var dir = attrName.substring(2);</span><br><span class="line">                if (me.isEventDirective(dir)) &#123;</span><br><span class="line">                    compileUtil.eventHandler(node, me.$vm, exp, dir);</span><br><span class="line">                &#125; else &#123;</span><br><span class="line">                    compileUtil[dir] &amp;&amp; compileUtil[dir](node, me.$vm, exp);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var compileUtil = &#123;</span><br><span class="line">    text: function(node, vm, exp) &#123;</span><br><span class="line">        this.bind(node, vm, exp, &apos;text&apos;);</span><br><span class="line">    &#125;,</span><br><span class="line">    bind: function(node, vm, exp, dir) &#123;</span><br><span class="line">        var updaterFn = udater[dir + &apos;Updater&apos;];</span><br><span class="line">        updaterFn &amp;&amp; updaterFn(node, vm[exp]);</span><br><span class="line">        new Watcher(vm, exp, function(value, oldValue) &#123;</span><br><span class="line">        // ä¸€æ—¦å±æ€§å€¼æœ‰å˜åŒ–ï¼Œä¼šæ”¶åˆ°é€šçŸ¥æ‰§è¡Œæ­¤æ›´æ–°å‡½æ•°ï¼Œæ›´æ–°è§†å›¾</span><br><span class="line">            updaterFn &amp;&amp; updaterFn(node, value, oldValue);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var updater = &#123;</span><br><span class="line">    textUpdater: function(node, value) &#123;</span><br><span class="line">        node.textContent = typeof value == &apos;undefined&apos; ? &apos;&apos; : value;</span><br><span class="line">    &#125;</span><br><span class="line">    // ...çœç•¥</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h4 id="3-å®ç°Watcher"><a href="#3-å®ç°Watcher" class="headerlink" title="3.å®ç°Watcher"></a>3.å®ç°Watcher</h4><p>Watcherè®¢é˜…è€…ä½œä¸ºObserveå’ŒCompileä¹‹é—´é€šä¿¡çš„æ¡¥æ¢ï¼Œä¸»è¦åšçš„äº‹æƒ…æ˜¯ï¼š</p><p>1.åœ¨è‡ªèº«å®ä¾‹åŒ–å¾€å±æ€§è®¢é˜…å™¨depé‡Œé¢æ·»åŠ è‡ªå·±</p><p>2.è‡ªèº«å¿…é¡»æœ‰ä¸€ä¸ªupdate()æ–¹æ³•</p><p>3.å¾…å±æ€§å˜åŠ¨dep.notice()é€šçŸ¥æ—¶ï¼Œèƒ½è°ƒç”¨è‡ªèº«çš„update()æ–¹æ³•ï¼Œå¹¶è§¦å‘Compileä¸­ç»‘å®šçš„å›è°ƒ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">function Watcher(vm, exp, cb) &#123;</span><br><span class="line">    this.cb = cb;</span><br><span class="line">    this.vm = vm;</span><br><span class="line">    this.exp = exp;</span><br><span class="line">    // æ­¤å¤„ä¸ºäº†è§¦å‘å±æ€§çš„getterï¼Œä»è€Œåœ¨depæ·»åŠ è‡ªå·±ï¼Œç»“åˆObserveræ›´æ˜“ç†è§£</span><br><span class="line">    this.value = this.get(); </span><br><span class="line">&#125;</span><br><span class="line">Watcher.prototype = &#123;</span><br><span class="line">    update: function() &#123;</span><br><span class="line">        this.run();// å±æ€§å€¼å˜åŒ–æ”¶åˆ°é€šçŸ¥</span><br><span class="line">    &#125;,</span><br><span class="line">    run: function() &#123;</span><br><span class="line">        var value = this.get(); // å–åˆ°æœ€æ–°å€¼</span><br><span class="line">        var oldVal = this.value;</span><br><span class="line">        if (value !== oldVal) &#123;</span><br><span class="line">            this.value = value;</span><br><span class="line">            this.cb.call(this.vm, value, oldVal); // æ‰§è¡ŒCompileä¸­ç»‘å®šçš„å›è°ƒï¼Œæ›´æ–°è§†å›¾</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    get: function() &#123;</span><br><span class="line">        Dep.target = this;// å°†å½“å‰è®¢é˜…è€…æŒ‡å‘è‡ªå·±</span><br><span class="line">        var value = this.vm[exp];// è§¦å‘getterï¼Œæ·»åŠ è‡ªå·±åˆ°å±æ€§è®¢é˜…å™¨ä¸­</span><br><span class="line">        Dep.target = null;// æ·»åŠ å®Œæ¯•ï¼Œé‡ç½®</span><br><span class="line">        return value;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>å®ä¾‹åŒ–Watcherçš„æ—¶å€™ï¼Œè°ƒç”¨get()æ–¹æ³•ï¼Œé€šè¿‡Dep.target = watcherInstanceæ ‡è®°è®¢é˜…è€…æ˜¯å½“å‰watcherå®ä¾‹ï¼Œå¼ºè¡Œè§¦å‘å±æ€§å®šä¹‰çš„getteræ–¹æ³•ï¼Œgetteræ–¹æ³•æ‰§è¡Œçš„æ—¶å€™ï¼Œå°±ä¼šåœ¨å±æ€§çš„è®¢é˜…å™¨depæ·»åŠ å½“å‰watcherå®ä¾‹ï¼Œä»è€Œåœ¨å±æ€§å€¼æœ‰å˜åŒ–çš„æ—¶å€™ï¼ŒwatcherInstanceå°±èƒ½æ”¶åˆ°æ›´æ–°é€šçŸ¥ã€‚</p><p> åŸºæœ¬ä¸Švueä¸­æ•°æ®ç»‘å®šç›¸å…³æ¯”è¾ƒæ ¸å¿ƒçš„å‡ ä¸ªæ¨¡å—ä¹Ÿæ˜¯è¿™å‡ ä¸ªï¼ŒçŒ›æˆ³<a href="https://github.com/vuejs/vue" target="_blank" rel="noopener">è¿™é‡Œ</a> , åœ¨src ç›®å½•å¯æ‰¾åˆ°vueæºç ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;MVVMåŸç†å®ç°&quot;&gt;&lt;a href=&quot;#MVVMåŸç†å®ç°&quot; class=&quot;headerlink&quot; title=&quot;MVVMåŸç†å®ç°&quot;&gt;&lt;/a&gt;MVVMåŸç†å®ç°&lt;/h2&gt;&lt;p&gt;åœ¨å®ç°MVVMä¹‹å‰æˆ‘ä»¬å…ˆæ¥äº†è§£ä¸€ä¸‹MVVMå’ŒMVCæ¨¡å¼çš„å·®å¼‚&lt;/p&gt;
&lt;h3 id=&quot;ä¸€ã€MVVM-vs-MVC&quot;&gt;&lt;a href=&quot;#ä¸€ã€MVVM-vs-MVC&quot; class=&quot;headerlink&quot; title=&quot;ä¸€ã€MVVM vs MVC&quot;&gt;&lt;/a&gt;ä¸€ã€MVVM vs MVC&lt;/h3&gt;&lt;h4 id=&quot;MVCæ¨¡å¼&quot;&gt;&lt;a href=&quot;#MVCæ¨¡å¼&quot; class=&quot;headerlink&quot; title=&quot;MVCæ¨¡å¼&quot;&gt;&lt;/a&gt;MVCæ¨¡å¼&lt;/h4&gt;&lt;blockquote&gt;
&lt;p&gt;View(è§†å›¾)ï¼š ç”¨æˆ·ç•Œé¢ &lt;br&gt;&lt;br&gt;Controller(æ§åˆ¶å™¨): ä¸šåŠ¡é€»è¾‘ &lt;br&gt;&lt;br&gt;Model(æ¨¡å‹): æ•°æ®ä¿å­˜&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://lc-gold-cdn.xitu.io/9da7ababda36b88a5dd7.png?imageView2/0/w/1280/h/960/format/webp/ignore-error/1&quot; alt&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="js, vue" scheme="http://yoursite.com/tags/js-vue/"/>
    
  </entry>
  
  <entry>
    <title>BFCå¸ƒå±€</title>
    <link href="http://yoursite.com/2019/07/03/BFC%E5%B8%83%E5%B1%80/"/>
    <id>http://yoursite.com/2019/07/03/BFCå¸ƒå±€/</id>
    <published>2019-07-03T03:19:35.000Z</published>
    <updated>2019-08-16T09:24:32.426Z</updated>
    
    <content type="html"><![CDATA[<h2 id="BFC-å—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡"><a href="#BFC-å—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡" class="headerlink" title="BFC(å—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡)"></a>BFC(å—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡)</h2><blockquote><blockquote><p>æ˜¯webé¡µé¢çš„å¯è§†åŒ–CSSæ¸²æŸ“çš„ä¸€éƒ¨åˆ†ï¼Œæ˜¯å¸ƒå±€è¿‡ç¨‹ä¸­ç”Ÿæˆå—çº§ç›’å­çš„åŒºåŸŸï¼Œä¹Ÿæ˜¯æµ®åŠ¨å…ƒç´ ä¸å…¶ä»–å…ƒç´ çš„äº¤äº’åŒºåŸŸã€‚</p></blockquote></blockquote><a id="more"></a><h3 id="è§¦å‘æ¡ä»¶"><a href="#è§¦å‘æ¡ä»¶" class="headerlink" title="è§¦å‘æ¡ä»¶"></a>è§¦å‘æ¡ä»¶</h3><ol><li>æ ¹å…ƒç´ , å³HTMLå…ƒç´ </li><li>floatçš„å€¼ä¸ä¸ºnone</li><li>overflowçš„å€¼ä¸ä¸ºvisible</li><li>displayçš„å€¼ä¸ºinline-block, table-cell, table-caption</li><li>positionçš„å€¼ä¸ºabsoluteæˆ–fixed</li></ol><h3 id="å¸ƒå±€è§„åˆ™"><a href="#å¸ƒå±€è§„åˆ™" class="headerlink" title="å¸ƒå±€è§„åˆ™"></a>å¸ƒå±€è§„åˆ™</h3><ol><li>å†…éƒ¨çš„boxä¼šåœ¨å‚ç›´æ–¹å‘, ä¸€ä¸ªæ¥ä¸€ä¸ªåœ°æ”¾ç½®(è¿™ç‚¹å°±æ˜¯æˆ‘ä»¬å¸¸è§åˆ°çš„å—çº§å…ƒç´ å ä¸€è¡Œ)</li><li>boxçš„å‚ç›´æ–¹å‘çš„è·ç¦»ç”±marginå†³å®š, å±äºåŒä¸€ä¸ªBFCçš„ä¸¤ä¸ªç›¸é‚»çš„marginä¼šå‘ç”Ÿé‡å , ä¸æ–¹å‘æ— å…³(å‚ç›´æ–¹å‘ä¸Šçš„marginé‡åˆä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„â€œåå¡Œç°è±¡â€)</li><li>æ¯ä¸ªå…ƒç´ çš„margin boxçš„å·¦è¾¹, ä¸åŒ…å«border boxçš„å·¦è¾¹ç›¸æ¥è§¦(å¯¹äºä»å·¦å¾€å³çš„æ ¼å¼åŒ–, å¦åˆ™ç›¸å). å³ä½¿å­˜åœ¨æµ®åŠ¨ä¹Ÿæ˜¯å¦‚æ­¤</li><li>BFCçš„åŒºåŸŸä¸ä¼šä¸float boxé‡å </li><li>BFCå°±æ˜¯é¡µé¢ä¸Šçš„ä¸€ä¸ªéš”å£çš„ç‹¬ç«‹å®¹å™¨, å®¹å™¨é‡Œé¢çš„å­å…ƒç´ ä¸ä¼šå½±å“åˆ°å¤–é¢çš„å…ƒç´ . åä¹‹ä¹Ÿå¦‚æ­¤</li><li>è®¡ç®—BFCçš„é«˜åº¦æ—¶, æµ®åŠ¨å…ƒç´ ä¹Ÿå‚ä¸è®¡ç®—</li></ol><h3 id="å¯¹æ¯”åˆå­¦cssæ—¶çš„è§„åˆ™"><a href="#å¯¹æ¯”åˆå­¦cssæ—¶çš„è§„åˆ™" class="headerlink" title="å¯¹æ¯”åˆå­¦cssæ—¶çš„è§„åˆ™"></a>å¯¹æ¯”åˆå­¦cssæ—¶çš„è§„åˆ™</h3><ol><li>blockå…ƒç´ ä¼šæ‰©å±•åˆ°ä¸çˆ¶å…ƒç´ åŒå®½, æ‰€ä»¥blockå…ƒç´ ä¼šå‚ç›´æ’åˆ—</li><li>å‚ç›´æ–¹å‘ä¸Šä¸¤ä¸ªç›¸é‚»çš„DIV marginé‡å , è€Œæ°´å¹³æ–¹å‘ä¸Šä¸ä¼š(è¿™ä¸ªè¯´æ³•å°±ä¸å®Œå…¨æ­£ç¡®)</li><li>æµ®åŠ¨å…ƒç´ ä¼šæ¥è¿‘å·¦ä¸Šæ–¹æˆ–å³ä¸Šæ–¹</li><li>ä¸ºçˆ¶å…ƒç´ è®¾ç½®overflow: hidden æˆ–æµ®åŠ¨å…ƒç´ , åˆ™ä¼šåŒ…å«æµ®åŠ¨å…ƒç´ </li></ol><p><em>åˆå­¦CSSè§„åˆ™èƒŒåæ›´æ·±å±‚æ¬¡çš„æ¦‚å¿µå…¶å®å°±æ˜¯BFCå¸ƒå±€è§„åˆ™</em></p><h3 id="ä½œç”¨"><a href="#ä½œç”¨" class="headerlink" title="ä½œç”¨"></a>ä½œç”¨</h3><ol><li>è‡ªé€‚åº”çš„ä¸¤æ å¸ƒå±€</li><li>å¯ä»¥é˜»æ­¢å…ƒç´ è¢«æµ®åŠ¨å…ƒç´ è¦†ç›–</li><li>å¯ä»¥åŒ…å«æµ®åŠ¨å…ƒç´ â€”â€”æ¸…é™¤å†…éƒ¨æµ®åŠ¨</li><li>åˆ†å±ä¸åŒçš„BFCæ—¶å¯ä»¥é˜»æ­¢marginé‡å </li></ol><h3 id="é€šè¿‡BFCå®ç°ä¸¤æ å¸ƒå±€"><a href="#é€šè¿‡BFCå®ç°ä¸¤æ å¸ƒå±€" class="headerlink" title="é€šè¿‡BFCå®ç°ä¸¤æ å¸ƒå±€"></a>é€šè¿‡BFCå®ç°ä¸¤æ å¸ƒå±€</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Document&lt;/title&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">        *&#123;</span><br><span class="line">            margin: 0;</span><br><span class="line">            padding: 0;</span><br><span class="line">        &#125;</span><br><span class="line">        .box &#123;</span><br><span class="line">            height: 100%;</span><br><span class="line">            width: 100%;</span><br><span class="line">        &#125;</span><br><span class="line">        .left &#123;</span><br><span class="line">            float: left;</span><br><span class="line">            height: 200px;</span><br><span class="line">            background-color: aquamarine;</span><br><span class="line">            width: 300px;</span><br><span class="line">            margin-right: 20px;</span><br><span class="line">        &#125;</span><br><span class="line">        .right &#123;</span><br><span class="line">            height: 300px;</span><br><span class="line">            background-color: blueviolet;</span><br><span class="line">            overflow: hidden;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;div class=&quot;box&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;left&quot;&gt;&lt;/div&gt;</span><br><span class="line">        &lt;div class=&quot;right&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;BFC-å—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡&quot;&gt;&lt;a href=&quot;#BFC-å—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡&quot; class=&quot;headerlink&quot; title=&quot;BFC(å—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡)&quot;&gt;&lt;/a&gt;BFC(å—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡)&lt;/h2&gt;&lt;blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;æ˜¯webé¡µé¢çš„å¯è§†åŒ–CSSæ¸²æŸ“çš„ä¸€éƒ¨åˆ†ï¼Œæ˜¯å¸ƒå±€è¿‡ç¨‹ä¸­ç”Ÿæˆå—çº§ç›’å­çš„åŒºåŸŸï¼Œä¹Ÿæ˜¯æµ®åŠ¨å…ƒç´ ä¸å…¶ä»–å…ƒç´ çš„äº¤äº’åŒºåŸŸã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="css" scheme="http://yoursite.com/tags/css/"/>
    
  </entry>
  
</feed>
